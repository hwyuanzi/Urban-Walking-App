{% extends "base.html" %}

{% block content %}
<div class="header-section">
    <h1>Explore Trails</h1>
    
    <form action="{{ url_for('index') }}" method="get" class="search-bar">
        <input type="text" name="q" placeholder="Search by name or neighborhood..." value="{{ query if query else '' }}">
        <button type="submit">Search</button>
    </form>
</div>

{% if trails %}
    {% for trail in trails %}
    <div class="card trail-item">
        <div class="trail-header">
            <h2>{{ trail.title }}</h2>
            <span class="difficulty-badge">{{ trail.difficulty }}</span>
        </div>
        
        <div class="trail-meta">
            <span>ğŸ“ {{ trail.neighborhood }}</span>
            <span>â± {{ trail.duration }}</span>
        </div>
        
        <p style="margin-top: 12px; color: #333;">{{ trail.description }}</p>
        
        {% if current_user.is_authenticated and trail.created_by == current_user.id %}
        <div class="trail-actions">
            <a href="{{ url_for('edit_trail', trail_id=trail._id) }}" class="btn btn-secondary" style="font-size: 0.9rem; padding: 8px 16px;">Edit</a>
            <form action="{{ url_for('delete_trail', trail_id=trail._id) }}" method="POST" style="display:inline;">
                <button type="submit" class="btn btn-danger" style="font-size: 0.9rem; padding: 8px 16px;" onclick="return confirm('Are you sure?')">Delete</button>
            </form>
        </div>
        {% endif %}
    </div>
    {% endfor %}
{% else %}
    <div class="card"><p>No trails found.</p></div>
{% endif %}
{% endblock %}